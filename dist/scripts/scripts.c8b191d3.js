var underscore=angular.module("underscore",[]);underscore.factory("_",["$window",function(){return $window._}]);var app=angular.module("WIP",["ui.router","underscore","ui.bootstrap","smart-table","ngAnimate","config"]);console.log("this is the app starting up"),app.config(function($stateProvider){$stateProvider.state("tabs",{url:"/",templateUrl:"views/tabs.html",controller:"OrdersCtrl",resolve:{orderData:function(wipService,configService){return wipService.getData(configService.config("open",""))},settlementsData:function(wipService,configService){return wipService.getData(configService.config("settlements",""))},completeOrders:function(wipService,configService){return wipService.getData(configService.config("complete",""))}}}).state("orderDetail",{templateUrl:"views/detail.html",controller:"OrderDetailCtrl",params:{accountId:null},resolve:{orderDetails:function(wipService,configService,$stateParams){var accountId=$stateParams.accountId;return wipService.getData(configService.config("detail",accountId))}}})}),app.run(function($state,configService){$state.go("tabs")});var orderMockData=[{account:{accountId:{key:"S43566"},accountName:"JEFFERY CHRISTOPHER R",productName:"Warrants",adviser:"Mark",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"REJECTED"},{account:{accountId:{key:"V11233"},accountName:"RISZKO SUPERANNUATION",productName:"Warrants",adviser:"Mark",accountServiceType:"INVESTMENT"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"I67661"},accountName:"SMALES SUPERANNUATION FUND",productName:"Warrants",adviser:"Ed",accountServiceType:"INVESTMENT"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"V57294"},accountName:"PAKIRI SUPERANNUATION FUND",productName:"Warrants",adviser:"Ed",accountServiceType:"INVESTMENT"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"O08263"},accountName:"HILL GREGORY JOHN",productName:"Term deposits",adviser:"Ed",accountServiceType:"PENSION"},minOpenOrderState:"EXECUTION FAILED"},{account:{accountId:{key:"U05631"},accountName:"GROOM FIONA",productName:"Term deposits",adviser:"Ed",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"P85824"},accountName:"READ PHILIP ALAN",productName:"Term deposits",adviser:"Ed",accountServiceType:"PENSION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"O22076"},accountName:"WARD ELLEN",productName:"SMA",adviser:"Ed",accountServiceType:"PENSION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"O15073"},accountName:"READ PHILIP ALAN",productName:"SMA",adviser:"Fred",accountServiceType:"PENSION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"U05824"},accountName:"COLEMAN KAREN",productName:"SMA",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"U12067"},accountName:"CABARKAPA ALEKSANDRA",productName:"Managed funds",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"U18380"},accountName:"KITCHEN ALLICIA",productName:"Managed funds",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"C04489"},accountName:"CHAN WILLIAM",productName:"Managed funds",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"U19543"},accountName:"HARRINGTON AARON",productName:"Managed funds",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"},{account:{accountId:{key:"U21812"},accountName:"LUKATELICH AARON NICHOLAS",productName:"Managed funds",adviser:"Fred",accountServiceType:"SUPERANNUATION"},minOpenOrderState:"FAILED"}],settlementsMockData=[{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND "},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.41623},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-22-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100.00",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"}],completeOrdersMockData=[{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"08-24-2015",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:24162,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:10056.75},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:4662,fee:"$100,-",price:{currency:"AUD",value:.9968},settlementValue:{currency:"AUD",value:4646.73},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:1562,fee:"$100,-",price:{currency:"AUD",value:1.0115},settlementValue:{currency:"AUD",value:1580.26},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:4133,fee:"$100,-",price:{currency:"AUD",value:1.031},settlementValue:{currency:"AUD",value:4260.74},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:3640,fee:"$100,-",price:{currency:"AUD",value:1.0703},settlementValue:{currency:"AUD",value:3896.46},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V00169"},accountName:"ROBERG SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:3487,fee:"$100,-",price:{currency:"AUD",value:1.0949},settlementValue:{currency:"AUD",value:3817.74},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:21388,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:8902.2},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:2345,fee:"$100,-",price:{currency:"AUD",value:.9966},settlementValue:{currency:"AUD",value:2337},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:786,fee:"$100,-",price:{currency:"AUD",value:1.0115},settlementValue:{currency:"AUD",value:794.77},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:2079,fee:"$100,-",price:{currency:"AUD",value:1.0308},settlementValue:{currency:"AUD",value:2142.87},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:1831,fee:"$100,-",price:{currency:"AUD",value:1.0705},settlementValue:{currency:"AUD",value:1959.66},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V03589"},accountName:"GILL FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:1754,fee:"$100,-",price:{currency:"AUD",value:1.0946},settlementValue:{currency:"AUD",value:1920.08},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:15805,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:6578.47},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:1972,fee:"$100,-",price:{currency:"AUD",value:.9965},settlementValue:{currency:"AUD",value:1964.99},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:661,fee:"$100,-",price:{currency:"AUD",value:1.0106},settlementValue:{currency:"AUD",value:668.26},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:1748,fee:"$100,-",price:{currency:"AUD",value:1.0309},settlementValue:{currency:"AUD",value:1801.77},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:1539,fee:"$100,-",price:{currency:"AUD",value:1.0708},settlementValue:{currency:"AUD",value:1647.72},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04021"},accountName:"CLARK STEPHEN J & CLARK GILLIAN T (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:1475,fee:"$100,-",price:{currency:"AUD",value:1.0942},settlementValue:{currency:"AUD",value:1614.43},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04171"},accountName:"WITTS ANTHONY S & WITTS KERRIE J (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:7560,fee:"$100,-",price:{currency:"AUD",value:.4163},settlementValue:{currency:"AUD",value:3146.71},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04171"},accountName:"WITTS ANTHONY S & WITTS KERRIE J (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:284,fee:"$100,-",price:{currency:"AUD",value:1.0106},settlementValue:{currency:"AUD",value:287.36},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04171"},accountName:"WITTS ANTHONY S & WITTS KERRIE J (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:752,fee:"$100,-",price:{currency:"AUD",value:1.0306},settlementValue:{currency:"AUD",value:774.79},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04171"},accountName:"WITTS ANTHONY S & WITTS KERRIE J (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:662,fee:"$100,-",price:{currency:"AUD",value:1.071},settlementValue:{currency:"AUD",value:708.55},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04171"},accountName:"WITTS ANTHONY S & WITTS KERRIE J (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:634,fee:"$100,-",price:{currency:"AUD",value:1.0946},settlementValue:{currency:"AUD",value:694.24},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:93871,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:39071.71},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:1734,fee:"$100,-",price:{currency:"AUD",value:.9965},settlementValue:{currency:"AUD",value:1727.95},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:581,fee:"$100,-",price:{currency:"AUD",value:1.012},settlementValue:{currency:"AUD",value:587.64},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:1537,fee:"$100,-",price:{currency:"AUD",value:1.0306},settlementValue:{currency:"AUD",value:1584.41},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:1354,fee:"$100,-",price:{currency:"AUD",value:1.0702},settlementValue:{currency:"AUD",value:1448.95},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04864"},accountName:"DENYER FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:1297,fee:"$100,-",price:{currency:"AUD",value:1.0948},settlementValue:{currency:"AUD",value:1419.68},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06236"},accountName:"COLEEN EDGAR SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:39354,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:16380.27},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:2249,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:935.97},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:1270,fee:"$100,-",price:{currency:"AUD",value:.9961},settlementValue:{currency:"AUD",value:1265.39},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:425,fee:"$100,-",price:{currency:"AUD",value:1.0118},settlementValue:{currency:"AUD",value:430.33},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:1126,fee:"$100,-",price:{currency:"AUD",value:1.0302},settlementValue:{currency:"AUD",value:1160.28},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:991,fee:"$100,-",price:{currency:"AUD",value:1.0706},settlementValue:{currency:"AUD",value:1061.08},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V19247"},accountName:"SWIATKIWSKY TARA (MARGIN LOAN A/C)",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:950,fee:"$100,-",price:{currency:"AUD",value:1.0947},settlementValue:{currency:"AUD",value:1039.64},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:12192,fee:"$100,-",price:{currency:"AUD",value:.4163},settlementValue:{currency:"AUD",value:5074.83},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-01-2010",tradeDate:"22-01-2010",orderType:"REDEMPTION",units:5680,fee:"$100,-",price:{currency:"AUD",value:.9967},settlementValue:{currency:"AUD",value:5660.77},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:1903,fee:"$100,-",price:{currency:"AUD",value:1.0116},settlementValue:{currency:"AUD",value:1925.12},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:5035,fee:"$100,-",price:{currency:"AUD",value:1.031},settlementValue:{currency:"AUD",value:5190.55},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:4435,fee:"$100,-",price:{currency:"AUD",value:1.0703},settlementValue:{currency:"AUD",value:4746.77},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:4248,fee:"$100,-",price:{currency:"AUD",value:1.0949},settlementValue:{currency:"AUD",value:4650.88},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V80675"},accountName:"RAYJAY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"ETL0120AU"},name:"EQT Wsale High Inc Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"09-04-2013",tradeDate:"09-04-2013",orderType:"REDEMPTION",units:22920,fee:"$100,-",price:{currency:"AUD",value:.0216},settlementValue:{currency:"AUD",value:494.83},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:37936,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:15790.27},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"20-04-2010",tradeDate:"20-04-2010",orderType:"REDEMPTION",units:2549,fee:"$100,-",price:{currency:"AUD",value:1.0118},settlementValue:{currency:"AUD",value:2578.82},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"17-06-2010",tradeDate:"17-06-2010",orderType:"REDEMPTION",units:6745,fee:"$100,-",price:{currency:"AUD",value:1.0308},settlementValue:{currency:"AUD",value:6953.08},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"22-02-2011",tradeDate:"22-02-2011",orderType:"REDEMPTION",units:5940,fee:"$100,-",price:{currency:"AUD",value:1.0705},settlementValue:{currency:"AUD",value:6358.6},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"HFL0104AU"},name:"LHP Diversified Investments Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"14-02-2012",tradeDate:"14-02-2012",orderType:"REDEMPTION",units:5691,fee:"$100,-",price:{currency:"AUD",value:1.0947},settlementValue:{currency:"AUD",value:6230.15},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V92004"},accountName:"NEIMANIS FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"ETL0120AU"},name:"EQT Wsale High Inc Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"09-04-2013",tradeDate:"09-04-2013",orderType:"REDEMPTION",units:34908,fee:"$100,-",price:{currency:"AUD",value:.0216},settlementValue:{currency:"AUD",value:753.63},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"YS0172"},accountName:"YARRAGAND SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"PER0076AU"},name:"Pengana Property Securities Fund",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"29-06-2009",tradeDate:"29-06-2009",orderType:"REDEMPTION",units:6473,fee:"$100,-",price:{currency:"AUD",value:.4162},settlementValue:{currency:"AUD",value:2694.36},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V04776"},accountName:"BARNES FAMILY SUPERANNUATION FUND",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AUS0037AU"},name:"Aust Unity Healthcare Prop Trust A Units",type:"WHOLESALE_MANAGED_FUND"},settlementDate:"30-06-2015",tradeDate:"30-06-2015",orderType:"REDEMPTION",units:10061,fee:"$100,-",price:{currency:"AUD",value:.9348},settlementValue:{currency:"AUD",value:9405.48},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"
},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"},{account:{accountId:{key:"V06637"},accountName:"SHAW MARGARET JOAN",productName:"Investment Consolidator",adviser:{key:"PFALL"},accountServiceType:"INVESTMENT"},asset:{id:{key:"AIO"},name:"Asciano Limited",type:"AUSTRALIAN_EQUITY"},settlementDate:"26-06-2015",tradeDate:"26-06-2015",orderType:"BUY",units:80,fee:"$100,-",price:{currency:"AUD",value:6.63},settlementValue:{currency:"AUD",value:504},orderState:"AWAITING SETTLEMENT"}],detailMockData={accountId:"D1234",accountName:"Sherry Gates",accountType:"Investment Account",orders:[{orderDate:"12-06-2015",investment:"ANZ",type:"BUY",units:100,filledUnits:200,limitPrice:"$200",valid:"today only",fee:"$130.50",amount:"$1000",orderSource:"Transacting",status:"In progress",transactions:{reference:1234567,orderTaker:2e7,lastUpdated:"02-09-2014 12:36 PM",filledUnits:950,price:50922.47,amount:111222,fundingPriority:"level 1",status:"ON_MARKET",detailTransactions:[{lastUpdated:"02-09-2014 12:36 PM",filledUnits:950,price:50922.47,amount:111222,fundingPriority:"proceeds(1)",status:"ON_MARKET"},{lastUpdated:"02-09-2014 12:36 PM",filledUnits:950,price:50922.47,amount:111222,fundingPriority:"proceeds(1)",status:"ON_MARKET"},{lastUpdated:"02-09-2014 12:36 PM",filledUnits:950,price:50922.47,amount:111222,fundingPriority:"proceeds(1)",status:"ON_MARKET"}]}}],_id:"55d926a61cc52afc19e363de",index:0,guid:"7f46ddc1-3e50-464c-b0fc-01c5e477ca29",isActive:!1,balance:"$3,800.65",gender:"female",company:"SHEPARD",email:"sherrygates@shepard.com",phone:"+1 (852) 570-2571",address:"711 Bristol Street, Kempton, Florida, 7984",about:"Voluptate proident Lorem aute ut officia. Aliquip occaecat irure et pariatur ex aute et velit voluptate nostrud nostrud. Elit qui aliquip magna cillum tempor Lorem. Excepteur ea veniam occaecat adipisicing culpa irure consectetur ipsum labore duis.\r\n",registered:"2015-01-21T05:05:21 -11:00",latitude:3.334665,longitude:-119.601154,tags:["aliqua","anim","esse","sunt","irure","esse","sint"],friends:[{id:0,name:"Concepcion Small"},{id:1,name:"Mcdaniel West"},{id:2,name:"Jayne Combs"}],greeting:"Hello, undefined! You have 4 unread messages.",favoriteFruit:"apple"};angular.module("config",[]).constant("DATA",{environment:"development",WIPServiceClient:"https://itgsyddev252-vip1:8449/wealth/services/orders/wip/v1/account/",WIPServiceBusiness:"https://itgsyddev252-vip1:8449/wealth/services/orders/wip/v1/businesses/",businessId:"MPMSWP",adviserId:"PFALL",openOrdersSuffix:"/orders/statuses/open/minimum",awaitingSettlementsSuffix:"orders/statuses/awaitingsettlement",completedOrdersSuffix:"orders/statuses/complete"}),app.controller("OrdersCtrl",function($scope,$filter,$location,configService,orderData,settlementsData,completeOrders,$state,$http){console.log("orderdata in controller:",orderData),$scope.ordersTabActive=!0,$scope.settlementsTabActive=!1,$scope.completedTabActive=!1,console.log("ordersctrl started"),0==orderData.length?($scope.ordersTabActive=!1,$scope.settlementsTabActive=!0):($scope.displayedRows=orderData,$scope.accounts=orderData),$scope.settlements=settlementsData,$scope.completeOrders=completeOrders,$scope.advisers=["Mark","Ed","Fred",""],$scope.onSelect=function($item,$model,$label){$scope.$item=$item,$scope.$model=$model,$scope.$label=$label,console.log("id=",$item),$state.go("orderDetail",{accountId:$item.account.accountId.key})},$scope.resetFilter=function(){console.log("reset filter",$scope.assetType),$scope.assetType="All"}}),app.directive("ordersTab",function(){return{templateUrl:"views/ordersTab.html"}}),app.directive("awaitingSettlementsTab",function(){return{templateUrl:"views/awaitingSettlementsTab.html"}}),app.directive("completeOrdersTab",function(){return{templateUrl:"views/completeOrdersTab.html"}}),angular.module("WIP").factory("configService",function(DATA){return{config:function(tabType,id){switch(tabType){case"open":if(console.log("DATA environment:",DATA.environment),"mock"!=DATA.enviroment){var url=DATA.WIPServiceBusiness+DATA.businessId+"/advisers/"+DATA.adviserId+DATA.openOrdersSuffix;return url}return"/modules/common/orders/mock/ordersTabMockData.json";case"settlements":if("mock"!=DATA.enviroment){var url=DATA.WIPServiceBusiness+DATA.businessId+"/advisers/"+DATA.adviserId+"/"+DATA.awaitingSettlementsSuffix;return url}return"/modules/common/orders/mock/settlementsTabMockData.json";case"complete":if("mock"!=DATA.enviroment){var url=DATA.WIPServiceBusiness+DATA.businessId+"/advisers/"+DATA.adviserId+"/"+DATA.completedOrdersSuffix;return url}return"/modules/common/orders/mock/completeOrdersTabMockData.json";case"detail":if("mock"!=DATA.enviroment){console.log("ACC",id);var url=DATA.WIPServiceClient+id+"/orders";return console.log("DETAIL url from configservice",url),url}return"/modules/common/orders/mock/orderDetailMock.json"}}}}),angular.module("WIP").factory("wipService",function($http){return{getData:function(url){return $http.get(url).then(function(result){return console.log("WIPSERVICE url:",url),result.data})}}}),app.controller("AwaitingSettlementsCtrl",function($scope,$filter,$location,configService,settlementData){console.log("awaiting settlements ctrl started"),$scope.settlements=settlementData,console.log("settlementdata in ctrl",settlementData)}),app.directive("stRatio",function(){return{link:function(scope,element,attr){var ratio=+attr.stRatio;element.css("width",ratio+"%")}}}),app.filter("showCurrency",function(){return function(input,symbol){switch(symbol){case"AUD":return"$"+input}}}),app.controller("CompleteOrdersCtrl",function($scope,$filter,$location,configService,completeOrders){$scope.completeOrders=completeOrders,console.log("conmplete orders",completeOrders)}),app.directive("tableFilter",function($filter){return{restrict:"E",templateUrl:"views/tableFilter.html",controller:function($scope){$scope.assetTypes=["SMA","Super","Aus. Equities","Intl. Equities","Managed Investments","TD's","Pension","All",""],$scope.tradeTypes=["SELL","BUY","App (application)","REDEMPTION","Switches","All"]},link:function($scope){}}}),app.filter("dateRange",function(){return function(input,dateFrom,dateTo,dateName){return _.filter(input,function(d){if(d[dateName]){var res=Date.parse(d[dateName])>=Date.parse(dateFrom)&&Date.parse(d[dateName])<=Date.parse(dateTo);return void 0==res&&(res=!1),res}return null})}}),app.directive("datePicker",function($compile,$timeout){return{replace:!0,restrict:"E",templateUrl:"views/datepicker.html",scope:{dt:"=par1"},controller:function($scope){console.log("datepicker controller"),$scope.today=function(){$scope.dt=new Date},$scope.today(),$scope.clear=function(){$scope.dt=null},$scope.toggleMin=function(){$scope.minDate=$scope.minDate?null:new Date},$scope.toggleMin(),$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[2],$scope.status={opened:!1};var tomorrow=new Date;tomorrow.setDate(tomorrow.getDate()+1);var afterTomorrow=new Date;afterTomorrow.setDate(tomorrow.getDate()+2),$scope.events=[{date:tomorrow,status:"full"},{date:afterTomorrow,status:"partially"}],$scope.getDayClass=function(date,mode){if("day"===mode)for(var dayToCheck=new Date(date).setHours(0,0,0,0),i=0;i<$scope.events.length;i++){var currentDay=new Date($scope.events[i].date).setHours(0,0,0,0);if(dayToCheck===currentDay)return $scope.events[i].status}return""}}}}),app.controller("OrderDetailCtrl",function($scope,$filter,$location,configService,orderDetails,$stateParams){$scope.orderDetails=orderDetails,console.log("orderdetails in ctrl params NOW",$stateParams),console.log("data from resolve orderdetails in ctrl :",orderDetails),$scope.collapsed=!0,$scope.collapsedDetail=!0}),app.directive("orderSourceFilter",function(){return{templateUrl:"views/orderSourceFilter.html",controller:function($scope){$scope.showAdvancedSearch=!1}}}),app.directive("resetFilter",function(){return{templateUrl:"views/resetFilter.html"}}),angular.module("WIP").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("views/awaitingSettlementsTab.html",'<div> {{settlements.length}} results match your search selection. <div> <table st-table="settlement" class="table table-striped"> <thead> <tr> <th st-ratio="25" st-sort="account.accountName">Account</th> <th st-ratio="10" st-sort="account.tradeDate">Trade date</th> <th st-ratio="5" st-sort="account.orderType">Type</th> <th st-ratio="25" st-sort="account.asset.name">Investment</th> <th st-ratio="5" st-sort="account.units">Units</th> <th st-ratio="5" st-sort="account.price">Price</th> <th st-ratio="5" st-sort="account.fee">Fee</th> <th st-ratio="5" st-sort="account.settlementValue">Value</th> <th st-ratio="5" st-sort="account.account.adviser.key">Adviser</th> <th st-ratio="10" st-sort="account.settlementDate">Date</th> <th></th> </tr> </thead> <tbody> <!--<tr ng-repeat="account in settlements |  filter:tradeType |dateRange:dateFrom:dateTo:\'settlementDate\' ">--> <tr ng-repeat="account in settlements"> <td st-ratio="25"><a ui-sref="orderDetail({accountId:account.account.accountId.key})">{{account.account.accountName}}</a> </td> <td st-ratio="5">{{account.tradeDate}}</td> <td st-ratio="5">{{account.orderType}}</td> <td st-ratio="25">{{account.asset.name}}</td> <td st-ratio="5">{{account.units}}</td> <td st-ratio="5">{{account.price.value | showCurrency:account.price.currency}}</td> <td st-ratio="5">{{account.fee}}</td> <td st-ratio="5">{{account.settlementValue.value | showCurrency:account.price.currency}}</td> <td st-ratio="5">{{account.account.adviser.key}}</td> <td st-ratio="20">{{account.settlementDate}}</td> <td> <i class="fa fa-file-pdf-o"></i> </td> </tr> </tbody> <tfoot> <tr> <td colspan="11" class="text-center"> <div st-items-by-page="10" st-pagination="10" st-template="views/pagination.custom.html"></div> </td> </tr> </tfoot> </table> </div> </div>'),$templateCache.put("views/completeOrdersTab.html",'<div> {{completeOrders.length}} results match your search selection. <div> <table st-table="completeOrders" class="table table-striped"> <thead> <tr> <th st-ratio="25" st-sort="account.accountName">Account</th> <th st-ratio="10" st-sort="account.tradeDate">Trade date</th> <th st-ratio="5" st-sort="account.orderType">Type</th> <th st-ratio="25" st-sort="account.asset.name">Investment</th> <th st-ratio="5" st-sort="account.units">Units</th> <th st-ratio="5" st-sort="account.price">Price</th> <th st-ratio="5" st-sort="account.fee">Fee</th> <th st-ratio="5" st-sort="account.settlementValue.value">Value</th> <th st-ratio="5" st-sort="account.account.adviser.key">Adviser</th> <th st-ratio="10" st-sort="account.settlementDate">Date</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="account in completeOrders "> <td st-ratio="25"><a ui-sref="orderDetail({accountId:account.account.accountId.key})">{{account.account.accountName}}</a> </td> <td st-ratio="5">{{account.tradeDate}}</td> <td st-ratio="5">{{account.orderType}}</td> <td st-ratio="25">{{account.asset.name}}</td> <td st-ratio="5">{{account.units}}</td> <td st-ratio="5">{{account.price.value | showCurrency:account.price.currency}}</td> <td st-ratio="5">{{account.fee}}</td> <td st-ratio="5">{{account.settlementValue.value | showCurrency:account.price.currency}}</td> <td st-ratio="5">{{account.account.adviser.key}}</td> <td st-ratio="20">{{account.settlementDate}}</td> <td> <i class="fa fa-file-pdf-o"></i> </td> </tr> </tbody> <tfoot> <tr> <td colspan="11" class="text-center"> <div st-items-by-page="10" st-pagination="10" st-template="views/pagination.custom.html"></div> </td> </tr> </tfoot> </table> </div> </div>'),$templateCache.put("views/datepicker.html",'<p class="input-group"> <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dt" is-open="opened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p>'),$templateCache.put("views/detail.html",'<div class="orders"> <hr class="detail"> <div class="row form-inline"> <div class="col-sm-4"> <label>Account</label> <span>{{orderDetails.accountId}}</span> </div> <div class="col-sm-4"> <label>Accounttype</label> <span>{{orderDetails.accountType}}</span> </div> </div> <hr class="detail"> <div class="row form-inline"> <div class="col-sm-6"> <label>Accountname</label> <span>{{orderDetails.accountName}}</span> </div> </div> <hr class="detail"> <div class="row"> <order-source-filter></order-source-filter> <reset-filter></reset-filter> </div> <table-filter></table-filter> <div> <table st-table="displayedRows" st-safe-src="orderDetails" class="table table-striped"> <thead> <tr> <th st-ratio="10" st-sort="account.orderDate">ORDER DATE</th> <th st-ratio="10" st-sort="account.asset.name">INVESTMENT</th> <th st-ratio="10" st-sort="account.asset.type">TYPE</th> <th st-ratio="10" st-sort="account.totalUnits">UNITS</th> <th st-ratio="10" st-sort="account.unitsFilled">FILLED</th> <th st-ratio="5" st-sort="account.limitPrice.value">PRICE</th> <th st-ratio="10" st-sort="account.valid">VALID</th> <th st-ratio="5" st-sort="account.fee">FEE</th> <th st-ratio="5" st-sort="account.value">AMOUNT</th> <th st-ratio="5" st-sort="account.dataSource">SOURCE</th> <th st-ratio="10" st-sort="account.transactions.state">STATUS</th> <th st-ratio="5" st-sort="account.detail">DETAILS</th> </tr> </thead> <tbody ng-repeat="account in displayedRows"> <tr> <td st-ratio="20">{{account.orderDate}}</td> <td st-ratio="10">{{account.asset.name}}</td> <td st-ratio="10">{{account.asset.type}}</td> <td st-ratio="">{{account.totalUnits}}</td> <td st-ratio="5">{{account.unitsFilled}}</td> <td st-ratio="5">{{account.limitPrice.value| currency}}</td> <td st-ratio="10">??</td> <td st-ratio="5">??</td> <td st-ratio="5">{{account.value}}</td> <td st-ratio="5">{{account.dataSource}}</td> <td st-ratio="10">{{account.transactions.state}}</td> <td st-ratio="5"> <!--<a ng-class="{true:\'fa fa-plus\', false:\'fa fa-minus\'}[collapsed]" ng-click="collapsed = !collapsed"></a></td>--> <a class="fa fa-plus" ng-click="collapsed = !collapsed">details</a></td> </tr> <tr collapse="collapsed"> <th></th> <th></th> <th st-ratio="7" st-sort="transaction.reference">REF</th> <th st-ratio="10" st-sort="transaction.orderTaker">TAKER</th> <th st-ratio="23" st-sort="transaction.lastUpdated">UPDATED</th> <th st-ratio="5" st-sort="transaction.filledUnits">FILLED</th> <th st-ratio="5" st-sort="transaction.price">PRICE</th> <th st-ratio="10" st-sort="transaction.amount">AMOUNT</th> <th st-ratio="10" st-sort="transaction.fundingPriority">PRIORITY</th> <th st-ratio="10" st-sort="transaction.status">STATUS</th> </tr> <tr collapse="collapsed"> <td></td> <td></td> <td><span ng-show="account.transactions.fundingPriority=!\'Transacting\'">{{transaction.reference}}</span> <span ng-hide="account.transactions.fundingPriority=!\'Transacting\'"><a ng-click="collapsedDetail=!collapsedDetail">{{account.transactions.reference}}</a></span></td> <td> {{account.transactions.orderTaker}}</td> <td> {{account.transactions.lastUpdated}}</td> <td> {{account.transactions.filledUnits}}</td> <td> ${{account.transactions.price}}</td> <td> ${{account.transactions.amount}}</td> <td> {{account.transactions.fundingPriority}}</td> <td> {{account.transactions.status}}</td> </tr> <tr collapse="collapsedDetail" ng-repeat="transaction in account.transactions.detailTransactions"> <td></td> <td></td> <td></td> <td></td> <td>{{transaction.lastUpdated}}</td> <td>{{transaction.filledUnits}}</td> <td>${{transaction.price}}</td> </tr> </tbody></table> </div> <!--todo remove this--> <a ui-sref="tabs">back</a> <!--<table>--> <!--<tr>--> <!--<th></th>--> <!--<th></th>--> <!--<th st-ratio="7" st-sort="transaction.reference">REF</th>--> <!--<th st-ratio="10" st-sort="transaction.orderTaker">TAKER</th>--> <!--<th st-ratio="23" st-sort="transaction.lastUpdated">UPDATED</th>--> <!--<th st-ratio="5" st-sort="transaction.filledUnits">FILLED</th>--> <!--<th st-ratio="5" st-sort="transaction.price">PRICE</th>--> <!--<th st-ratio="10" st-sort="transaction.amount">AMOUNT</th>--> <!--<th st-ratio="10" st-sort="transaction.fundingPriority">PRIORITY</th>--> <!--<th st-ratio="10" st-sort="transaction.status">STATUS</th>--> <!--</tr>--> <!--</table>--> <!--<tr collapse="collapsed">--> <!--<td st-ratio="2"></td>--> <!--<td st-ratio="5"></td>--> <!--<td st-ratio="100" colspan="18">--> <!--<table st-ratio="100" class="table table-striped">--> <!--<thead>--> <!--<tr>--> <!--<td></td>--> <!--<td></td>--> <!--<td colspan="16" class="transactionDetails">--> <!--<h5>Transaction Details</h5>--> <!--</td>--> <!--</tr>--> <!--<tr>--> <!--<th></th>--> <!--<th></th>--> <!--<th st-ratio="7" st-sort="transaction.reference">REF</th>--> <!--<th st-ratio="10" st-sort="transaction.orderTaker">TAKER</th>--> <!--<th st-ratio="23" st-sort="transaction.lastUpdated">UPDATED</th>--> <!--<th st-ratio="5" st-sort="transaction.filledUnits">FILLED</th>--> <!--<th st-ratio="5" st-sort="transaction.price">PRICE</th>--> <!--<th st-ratio="10" st-sort="transaction.amount">AMOUNT</th>--> <!--<th st-ratio="10" st-sort="transaction.fundingPriority">PRIORITY</th>--> <!--<th st-ratio="10" st-sort="transaction.status">STATUS</th>--> <!--</tr>--> <!--</thead>--> <!--<tbody>--> <!--<table st-ratio="100" class="table table-striped">--> <!--<tr ng-repeat="transaction in account.transactions">--> <!--<td>--> <!--</td>--> <!--<td></td>--> <!--<td st-ratio="7">--> <!--<span ng-show="transaction.fundingPriority=!\'Transacting\'">{{transaction.reference}}</span>--> <!--<span ng-hide="transaction.fundingPriority=!\'Transacting\'"><a--> <!--ng-click="collapseddetail=!collapseddetail">{{transaction.reference}}</a> </span>--> <!--</td>--> <!--<td st-ratio="10">--> <!--{{transaction.orderTaker}}--> <!--</td>--> <!--<td st-ratio="23">--> <!--{{transaction.lastUpdated}}--> <!--</td>--> <!--<td st-ratio="5">--> <!--{{transaction.filledUnits}}--> <!--</td>--> <!--<td st-ratio="5">--> <!--${{transaction.price}}--> <!--</td>--> <!--<td st-ratio="10">--> <!--${{transaction.amount}}--> <!--</td>--> <!--<td st-ratio="10">--> <!--{{transaction.fundingPriority}}--> <!--</td>--> <!--<td st-ratio="10">--> <!--{{transaction.status}}--> <!--</td>--> <!--</tr>--> <!--&lt;!&ndash;<tr collapse="collapseddetail" ng-repeat="transactions in transaction.detailTransactions">&ndash;&gt;--> <!--&lt;!&ndash;<td>testing detaillll</td>&ndash;&gt;--> <!--&lt;!&ndash;{{transactions}}&ndash;&gt;--> <!--&lt;!&ndash;</tr>&ndash;&gt;--> <!--</table>--> <!--</td>--> <!--<td></td>--> <!--</tr>--> <!--</tbody>--> <!--<tfoot>--> <!--<tr>--> <!--<td colspan="11" id="text-center">--> <!--<div st-items-by-page="10" st-pagination="10"--> <!--st-template="views/pagination.custom.html"></div>--> <!--</td>--> <!--</tr>--> <!--</tfoot>--> <!--</table>--> <!--</td>--> <!--</tr>--> </div>'),$templateCache.put("views/orderSourceFilter.html",'<div class="col-sm-2"> <label for="">Order source</label> <select class="form-control"> <option value="">All</option> <option value="">Portfolio transacting</option> <option value="">Transacting</option> <option value="">Off-platform (new)</option> <option value="">Bulked managed investments</option> <option value="">Automatic cash management</option> <option value="">Model portfolios</option> <option value="">Dollar cost averaging</option> <option value="">Low cash auto sell</option> <option value="">Manual orders</option> <option value="">Bulked managed investment and TDs</option> <option value="">Funds transfer</option> <option value="">Exercise/assignments (new)</option> </select> </div> <div class="col-sm-2"> <label for="">Status</label> <select class="form-control"> <option value="">Complete</option> <option value="">In progress</option> <option value="">Awaiting settlement</option> <option value="">Pending</option> <option value="">Complete</option> <option value="">Cancelled</option> <option value="">Execute failed</option> </select> </div> <div class="col-sm-2 advancedSearch"> <a href="#" ng-click="showAdvancedSearch=!showAdvancedSearch">Advanced search</a> </div>'),$templateCache.put("views/ordersTab.html",'<div> <div> <span class="results"> {{accounts.length}} results match your search selection. </span> <table st-ratio="100" st-table="displayedRows" st-safe-src="accounts" class="table table-striped"> <thead> <tr> <th st-ratio="10" st-sort="accountId.key">Account</th> <th st-ratio="30" st-sort="account.accountName"></th> <th st-ratio="10" st-sort="account.adviser">Adviser</th> <th st-ratio="20" st-sort="account.productName">Product</th> <th st-ratio="30" st-sort="minOpenOrderState">Status</th> </tr> </thead> <tbody> <tr ng-repeat="acc in accounts | filter : { \'account\': account}:true "> <td st-ratio="10"><a ui-sref="orderDetail({accountId:acc.account.accountId.key})"> {{acc.account.accountId.key}}</a></td> <td st-ratio="10">{{acc.account.accountName}}</td> <td st-ratio="10">{{acc.account.adviser}}</td> <td st-ratio="10">{{acc.account.productName}}</td> <td st-ratio="10">{{acc.minOpenOrderState}}</td> </tr> </tbody> <tfoot> <tr> <td colspan="5" class="text-center"> <div st-items-by-page="10" st-pagination="" st-template="views/pagination.custom.html"></div> </td> </tr> </tfoot> </table> </div> </div>'),$templateCache.put("views/pagination.custom.html",'<nav> <ul class="pagination"> <li><a ng-click="selectPage(1)">First</a> </li><li><a ng-click="selectPage(currentPage - 1)">&lt;</a> </li><li><a><page-select></page-select> of {{numPages}}</a> </li><li><a ng-click="selectPage(currentPage + 1)">&gt;</a> </li><li><a ng-click="selectPage(numPages)">Last</a></li> </ul> </nav>'),$templateCache.put("views/resetFilter.html",'<div class="resetFilter"> <a href="#" ng-click="resetFilter()">Reset Filter</a> &nbsp<a href="#">Refresh</a> <i class="fa fa-file-excel-o"></i> <a ng-mousedown="csv.generate()" ng-href="{{ csv.link() }}" download="test.csv">Export to CSV</a> <i class="fa fa-print"></i> <a href="#">Print</a> </div>'),$templateCache.put("views/tableFilter.html",'<div collapse="showAdvancedSearch"> <div class="row tableFilter"> <div class="col-sm-2"> <label for="">Asset type</label> <select class="form-control" name="" ng-model="assetType" ng-options="item for item in assetTypes"> </select> </div> <div class="col-sm-2"> <label for="">Security</label> <input class="form-control" ng-model="security" type="text"> </div> <div class="col-sm-2"> <label for="">Trade type</label> <select class="form-control" ng-model="tradeType" ng-options="item for item in tradeTypes"> </select></div> <div class="col-sm-2"> <label for="">Date from:</label> <date-picker par1="dateFrom"></date-picker> </div> <div class="col-sm-2"> <label for="">Date to:</label> <date-picker par1="dateTo"></date-picker> </div> <div class="col-sm-2"> <label for="">Period</label> <select class="form-control"> <option>Today</option> <option>Last week</option> <option>Last month</option> <option>User defined</option> </select> </div> </div> </div>'),$templateCache.put("views/tabs.html",'<div class="main"> <div class="well search form-inline"> <div class="row"> <div class="col-sm-8"> <label for="">Account Search:</label> <input type="text" id="selectaccount" ng-model="selectedAccount" placeholder="Select accountname" typeahead-on-select="onSelect($item, $model, $label)" typeahead="(account.account.accountId.key + \' \' + account.account.accountName) for account in accounts | filter:$viewValue | limitTo:8" class="form-control" typeahead-loading="loadingAccounts"> <i ng-show="loadingAccounts" class="glyphicon glyphicon-refresh"></i> <div ng-show="noResults"> <i class="glyphicon glyphicon-remove"></i> No Results Found </div> </div> <div class="col-sm-4"> <label for="">Adviser:</label> <select id="selectadviser" class="form-control" name="" id="" ng-options="adviser for adviser in advisers" ng-model="account.adviser"> </select> </div> </div> </div> <div reset-filter=""></div> <div class="orders"> <div> <div> <div> <tabset id="tab"> <tab heading="Orders" active="ordersTabActive"> <orders-tab></orders-tab> </tab> <tab heading="Awaiting settlement" active="settlementsTabActive"> <table-filter security="acc"></table-filter> <awaiting-settlements-tab></awaiting-settlements-tab> </tab> <tab heading="Complete" active="completedTabActive"> <table-filter></table-filter> <complete-orders-tab></complete-orders-tab> </tab> </tabset> </div> </div> </div> </div> </div>')}]);